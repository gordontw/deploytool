# deploy server
beta:
  Nodes:         [192.168.0.1, 192.168.0.2]
  Repository:    git@github.com:gordontw/test.git
  Srcpath:       /tmp/deploy
  Dstpath:       /home
  Deployflow:    [local.clone,local.rsync,remote.test]

# run task
TASKS:
  local.clone:   git clone --depth=1 --recursive -q {{Repository}} {{Srcpath}}
  local.run:     date; ls -la
  local.rsync:   rsync -arvz {{Srcpath}} {!HOST!} {{Dstpath}}
  remote.env:    export a=b
  remote.test:   phpunit tests/
